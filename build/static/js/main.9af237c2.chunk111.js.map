{"version":3,"sources":["common/utils.js","ui/calendar/day.js","ui/calendar/month.js","ui/calendar/calendar.js","ui/header/header.js","ui/list/list.js","data/abstractmodel.js","data/abstractstore.js","data/demo.js","index.js"],"names":["isDate","date","getMonth","getDate","year","month","day","Date","isLeapYear","getFullYear","getDaysOfMonth","parseInt","getBeginDayOfMouth","getDay","dateUtils","getDisplayInfo","d","days","beginWeek","isOverdue","now","getTime","isToday","selectedDate","CalendarDay","e","this","props","ondayclick","selectdate","klass","react_default","a","createElement","onClick","bind","className","React","Component","CalendarMonth","beforeDays","html","i","push","key","day_CalendarDay","name","displayInfo","console","log","_renderBeginDayOfMouth","_renderDays","Calendar","map","data","index","month_CalendarMonth","Header","arr","right","len","length","item","callback","view","value","tagname","backaction","_renderRight","title","ListContainer","WrappedComponent","_React$Component","_class","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","_render","Model","url","param","validates","type","handler","val","assign","onComplete","onError","scope","_sendRequest","_data","JSON","parse","call","datamodel","dataformat","onDataSuccess","s","str","f","k","stringify","substr","buildurl","method","headers","Content-Type","mode","cache","body","search","_getParamStr","fetch","then","res","json","wx","getStorageSync","localStorage","getItem","setStorage","o","v","setItem","getStorage","Store","opts","lifeTime","_keyCache","sign","deadLine","removeOverdueCache","timeout","time","setTime","_getDeadline","_saveData","entity","success","_saveSysList","keyCache","complete","oldData","removeStorage","DemoModel","_this","assertThisInitialized","domain","head","version","ct","cacheData","pushValidates","_baseDataValidate","errno","fdata","set","getSign","ajaxOnly","get","prototype","ListStore","_this2","listModel","ListModel","_this3","_indate","HeaderMain","state","alert","header_Header","onBackaction","ListItem","train_number","use_time","from_time","from_station","seats","seat_price","to_time","to_station","PageMain","setParam","b","execute","setState","concat","List","src_HeaderMain","ReactDOM","render","src_PageMain","document","getElementById"],"mappings":"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","file":"static/js/main.9af237c2.chunk111.js","sourcesContent":["let isDate = function (date) {\n    return date && date.getMonth;\n};\n\n//兼容小程序日期\nlet getDate = function(year, month, day) {\n    if(!day) day = 1;\n    return new Date(year, month, day);\n}\n\nlet isLeapYear = function (year) {\n    //传入为时间格式需要处理\n    if (isDate(year)) year = year.getFullYear()\n    if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) return true;\n    return false;\n};\n\nlet getDaysOfMonth = function (date) {\n    var month = date.getMonth() + 1; //注意此处月份要加1\n    var year = date.getFullYear();\n    return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][parseInt(month) - 1];\n}\n\nlet getBeginDayOfMouth = function (date) {\n    var month = date.getMonth();\n    var year = date.getFullYear();\n    var d = getDate(year, month, 1);\n    return d.getDay();\n}\n\nlet getDisplayInfo = function(date) {\n    if (!isDate(date)) {\n      date = getDate(date)\n    }\n    var year = date.getFullYear();\n\n    var month = date.getMonth();\n    var d = getDate(year, month);\n\n    //这个月一共多少天\n    var days = getDaysOfMonth(d);\n\n    //这个月是星期几开始的\n    var beginWeek = getBeginDayOfMouth(d);\n\n    return {\n      year: year,\n      month: month,\n      days: days,\n      beginWeek: beginWeek\n    }\n  }\n\n  let isOverdue = function isOverdue(year, month, day) {\n    let date = new Date(year, month, day);\n    let now = new Date();\n    now = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n    return date.getTime() < now.getTime();\n  }\n  \n  let isToday = function isToday(year, month, day, selectedDate) {\n    let date = new Date(year, month, day);\n    let d = new Date(selectedDate);\n    d = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n    selectedDate = d.getTime();\n    return date.getTime() == selectedDate;\n  }\n\nlet dateUtils = {\n    isLeapYear,\n    getDaysOfMonth,\n    getBeginDayOfMouth,\n    getDisplayInfo,\n    isOverdue,\n    isToday\n};\n\nexport default dateUtils;","import React from 'react';\nimport dateUtils from '../../common/utils'\n\nexport default class CalendarDay extends React.Component {\n    onClick(e) {\n        let year = this.props.year;\n        let month = this.props.month;\n        let day = this.props.day;\n\n        this.props.ondayclick(year, month, day)\n    }\n\n    render() {\n        let year = this.props.year;\n        let month = this.props.month;\n        let day = this.props.day;\n        let selectdate = this.props.selectdate;\n\n        let klass = dateUtils.isOverdue(year, parseInt(month) - 1, day) ? 'cm-item--disabled' : '';\n        \n        if(dateUtils.isToday(year, parseInt(month) - 1, day, selectdate))\n            klass += ' active '\n\n        return (\n            <li onClick={this.onClick.bind(this)} className={klass} year={year} month={month} day={day}  >\n                <div className=\"cm-field-wrapper \">\n                    <div className=\"cm-field-title\">{day }</div>\n                </div>\n            </li>\n        )\n    }\n}","import React from 'react';\nimport dateUtils from '../../common/utils'\nimport CalendarDay from './day'\n\nexport default class CalendarMonth extends React.Component {\n\n    //获取首次空格\n    _renderBeginDayOfMouth(beforeDays) {\n        let html = [];\n        for (let i = 0; i < beforeDays; i++) {\n            html.push(<li key={i} className=\"cm-item--disabled\"></li>);\n        }\n        return html;\n    }\n\n    //和_renderBeginDayOfMouth类似可以重构掉\n    _renderDays(year, month, days) {\n        let html = [];\n        for(let i = 1; i <= days; i++) {\n            html.push(    \n                <CalendarDay ondayclick={this.props.ondayclick}  selectdate={this.props.selectdate}  key={i} year={year} month={month} day={i} />\n            )\n        }\n        return html;\n    }\n\n    render() {\n        let year = this.props.year;\n        let month = this.props.month;\n        \n        let name = new Date(year, parseInt(month) - 1, 1);\n        name = name.getFullYear() + '-' + (name.getMonth() + 1);\n\n        let displayInfo = dateUtils.getDisplayInfo(new Date(year, parseInt(month) - 1), 1);\nconsole.log(displayInfo)\n        return (\n            <ul className=\"cm-calendar-bd \">\n                <h3 className=\"cm-month calendar-cm-month js_month\">{name}</h3>\n                \n                <ul className=\"cm-day-list\">\n                    { this._renderBeginDayOfMouth( displayInfo.beginWeek) }\n                    { this._renderDays(year, month, displayInfo.days) }\n                </ul>\n            </ul>\n        )\n    }\n}","import React from 'react';\nimport dateUtils from '../../common/utils'\nimport CalendarMonth from './month'\n\n\nexport default class Calendar extends React.Component {\n    render() {\n        let year = this.props.year;\n        let month = this.props.month;\n        let weekDayArr = ['日', '一', '二', '三', '四', '五', '六'];\n        //获取当前日期数据\n        let displayInfo = dateUtils.getDisplayInfo(new Date(year, month, 0));\n        return (\n            <ul className=\"cm-calendar \">\n                <ul className=\"cm-calendar-hd\">\n                    {\n                        weekDayArr.map((data, index) => {\n                            return <li key={index} className=\"cm-item--disabled\">{data}</li>\n                        })\n                    }\n                </ul>\n                <CalendarMonth ondayclick={this.props.ondayclick} selectdate={this.props.selectdate} year={year} month={month}/>\n            </ul>\n        )\n    }\n}","import React from 'react';\nexport default class Header extends React.Component {\n\n    _renderRight() {\n        let html = [];\n        let arr = this.props.right;\n        if(!arr) return;\n\n        for(let i = 0, len = arr.length; i < len; i++) {\n            let item = arr[i];\n            html.push(   \n                <span onClick={item.callback.bind(item.view, this)} key={i} className={item.value ? 'cm-header-btn fr' : 'cm-header-icon fr'} >\n                    {item.value ? item.value : <i className={'icon-' + item.tagname}></i>}\n                </span>\n            )\n        }\n        return html;\n    }\n\n    onClick() {\n        if(this.props.backaction) {\n            this.props.backaction();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"cm-header\">\n                {this._renderRight()}\n                <span className=\" cm-header-icon fl  js_back\" onClick={this.onClick.bind(this)} >\n                    <i className=\"icon-back\"></i>\n                </span>\n                <h1 className=\"cm-page-title js_title\">\n                    {this.props.title}\n                </h1>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport './style.css';\n\nlet ListContainer = WrappedComponent => {\n    return class extends React.Component {\n\n        _render(data) {\n            let html = [];\n            for(let i = 0, len = data.length; i < len; i++) {\n                html.push(<WrappedComponent key={i} data={data[i]} />);\n            }\n            return html\n        }\n        render() {\n            let data = this.props.data;\n\n            console.log(data);\n            // debugger;\n\n            return (\n                <ul className=\"bus-list js_bus_list \">\n                    {data.length > 0 ? this._render(data) : '暂无数据'}\n                </ul>\n            )\n        }\n    }\n}\n\nexport default ListContainer;","export default class Model {\n  constructor() {\n    this.url = '';\n    this.param = {};\n    this.validates = [];\n    this.type = 'GET';\n  }\n  pushValidates(handler) {\n    if (typeof handler === 'function') {\n      this.validates.push(handler);\n    }\n  }\n  setParam(key, val) {\n    if (typeof key === 'object') {\n      Object.assign(this.param, key);\n    } else {\n      this.param[key] = val;\n    }\n  }\n  //@override\n  buildurl() {\n    return this.url;\n  }\n  onDataSuccess() {\n  }\n  //执行数据请求逻辑\n  execute(onComplete, onError) {\n    let scope = this;\n    let _success = function (data) {\n      let _data = data;\n      if (typeof data == 'string') _data = JSON.parse(data);\n\n      // @description 开发者可以传入一组验证方法进行验证\n      for (let i = 0, len = scope.validates.length; i < len; i++) {\n        if (!scope.validates[i](data)) {\n          // @description 如果一个验证不通过就返回\n          if (typeof onError === 'function') {\n            return onError.call(scope || this, _data, data);\n          } else {\n            return false;\n          }\n        }\n      }\n\n      // @description 对获取的数据做字段映射\n      let datamodel = typeof scope.dataformat === 'function' ? scope.dataformat(_data) : _data;\n\n      if (scope.onDataSuccess) scope.onDataSuccess.call(scope, datamodel, data);\n      if (typeof onComplete === 'function') {\n        onComplete.call(scope, datamodel, data);\n      }\n    };\n    this._sendRequest(_success);\n  }\n\n  _getParamStr(s) {\n    let str = '', f = false;\n    \n    for (let k in this.param) {\n      f = true;\n      str = str + k + '=' + (typeof this.param[k] === 'object' ? JSON.stringify(this.param[k]) : this.param[k])  + s;\n    }\n    if(f) str = str.substr(0, str.length - 1);\n    return str;\n  }\n\n  //删除过期缓存\n  _sendRequest(callback) {\n    let url = this.buildurl();\n    let param = {\n      method: this.type,\n      headers: {\n        'Content-Type': 'application/json;charset=UTF-8'\n      },\n      mode: 'cors',\n      cache: 'no-cache'\n    };\n    if (this.type === 'POST') {\n      param.body = JSON.stringify(this.param);\n    } else {\n      if (url.search(/\\?/) === -1) {\n        url += '?' + this._getParamStr('&')\n      } else {\n        url += '&' + this._getParamStr('&')\n      }\n    }\n\n    fetch(url, param)\n      .then(res => res.json())\n      .then((data) => {\n        callback && callback(data);\n      })\n\n    //小程序模块\n    // wx.request({\n    //   url: this.buildurl(),\n    //   data: this.param,\n    //   success: function success(data) {\n    //     callback && callback(data);\n    //   }\n    // });\n\n  }\n}\n","\n//处理微信小程序兼容\nlet wx = {\n  getStorageSync: function (key) {\n    return localStorage.getItem(key)\n  },\n  setStorage: function (o) {\n    let k = o.key;\n    let v = JSON.stringify(o.data)\n    let callback = o.callback;\n    localStorage.setItem(k, v);\n    callback && callback();\n  },\n  getStorage: function (key, callback) {\n    let data = localStorage.getItem(key);\n    callback(data);\n  }\n}\n\nexport default class Store {\n  constructor(opts) {\n    if (typeof opts === 'string') this.key = opts;\n    else Object.assign(this, opts);\n\n    //如果没有传过期时间,则默认30分钟\n    if (!this.lifeTime) this.lifeTime = 1;\n\n    //本地缓存用以存放所有localstorage键值与过期日期的映射\n    this._keyCache = 'SYSTEM_KEY_TIMEOUT_MAP';\n\n  }\n  //获取过期时间,单位为毫秒\n  _getDeadline() {\n    return this.lifeTime * 60 * 1000;\n  }\n\n  //获取一个数据缓存对象,存可以异步,获取我同步即可\n  get(sign) {\n    let key = this.key;\n    let now = new Date().getTime();\n    var data = wx.getStorageSync(key);\n    if (!data) return null;\n    data = JSON.parse(data);\n    //数据过期\n    if (data.deadLine < now) {\n      this.removeOverdueCache();\n      return null;\n    }\n\n    if (data.sign) {\n      if (sign === data.sign) return data.data;\n      else return null;\n    }\n    return null;\n  }\n\n  /*产出页面组件需要的参数\n  sign 为格式化后的请求参数，用于同一请求不同参数时候返回新数据，比如列表为北京的城市，后切换为上海，会判断tag不同而更新缓存数据，tag相当于签名\n  每一键值只会缓存一条信息\n  */\n  set(data, sign) {\n    let timeout = new Date();\n    let time = timeout.setTime(timeout.getTime() + this._getDeadline());\n    this._saveData(data, time, sign);\n  }\n  _saveData(data, time, sign) {\n    let key = this.key;\n    let entity = {\n      deadLine: time,\n      data: data,\n      sign: sign\n    };\n    let scope = this;\n\n    wx.setStorage({\n      key: key,\n      data: JSON.stringify(entity),\n      success: function () {\n        //每次真实存入前,需要往系统中存储一个清单\n        scope._saveSysList(key, entity.deadLine);\n      }\n    });\n  }\n  _saveSysList(key, timeout) {\n    if (!key || !timeout || timeout < new Date().getTime()) return;\n    let keyCache = this._keyCache;\n    wx.getStorage({\n      key: keyCache,\n      complete: function (data) {\n        let oldData = {};\n        if (data.data) oldData = JSON.parse(data.data);\n        oldData[key] = timeout;\n        wx.setStorage({\n          key: keyCache,\n          data: JSON.stringify(oldData)\n        });\n      }\n    });\n  }\n  //删除过期缓存\n  removeOverdueCache() {\n    let now = new Date().getTime();\n    let keyCache = this._keyCache;\n    wx.getStorage({\n      key: keyCache,\n      success: function (data) {\n        if (data && data.data) data = JSON.parse(data.data);\n        for (let k in data) {\n          if (data[k] < now) {\n            delete data[k];\n            wx.removeStorage({\n              key: k,\n              success: function () { }\n            });\n          }\n        }\n        wx.setStorage({\n          key: keyCache,\n          data: JSON.stringify(data)\n        });\n      }\n    });\n  }\n\n}","import Model from './abstractmodel';\nimport Store from './abstractstore';\n\nclass DemoModel extends Model {\n  constructor() {\n    super();\n    let scope = this;\n    this.domain = 'https://www.easy-mock.com/mock/5c29d45956db174d47ce162a/example_copy';\n    this.param = {\n      head: {\n        version: '1.0.1',\n        ct: 'ios'\n      }\n    };\n\n    //如果需要缓存,可以在此设置缓存对象\n    this.cacheData = null;\n\n    this.pushValidates(function (data) {\n      return scope._baseDataValidate(data);\n    });\n  }\n\n  //首轮处理返回数据，检查错误码做统一验证处理\n  _baseDataValidate(data) {\n    if (typeof data === 'string') data = JSON.parse(data);\n    if (data.errno === 0) {\n      if (data.data) data = data.data;\n      return true;\n    }\n    return false;\n  }\n\n  dataformat(data) {\n    if (typeof data === 'string') data = JSON.parse(data);\n    if (data.data) data = data.data;\n    if (data.data) data = data.data;\n    return data;\n  }\n\n  buildurl() {\n    return this.domain + this.url;\n  }\n\n  getSign() {\n    return JSON.stringify(this.param);\n  }\n  onDataSuccess(fdata, data) {\n    if (this.cacheData && this.cacheData.set)\n      this.cacheData.set(fdata, this.getSign());\n  }\n\n  //如果有缓存直接读取缓存,没有才请求\n  execute(onComplete, ajaxOnly) {\n    let data = null;\n    if (!ajaxOnly && this.cacheData && this.cacheData.get) {\n      data = this.cacheData.get(this.getSign());\n      if (data) {\n        onComplete(data);\n        return;\n      }\n    }\n    super.execute(onComplete);\n  }\n\n}\n\nclass ListStore extends Store {\n  constructor() {\n    super();\n    this.key = 'DEMO_LIST';\n    //30分钟过期时间\n    this.lifeTime = 30;\n  }\n}\n\nclass ListModel extends DemoModel {\n  constructor() {\n    super();\n    this.url = '/train/list';\n    this.type = 'GET';\n    // this.type = 'POST';\n\n    this.cacheData = new ListStore;\n  }\n  //每次数据访问成功，错误码为0时皆会执行这个回调\n  onDataSuccess(fdata, data) {\n    super.onDataSuccess(fdata, data);\n    //开始执行自我逻辑\n    let o = {\n      _indate: new Date().getTime()\n    };\n    // for (let k in fdata) {\n    //   o[k] = typeof fdata[k];\n    // }\n    //执行数据上报逻辑\n    console.log('执行数据上报逻辑', o);\n  }\n}\n\nlet listModel = new ListModel()\n\nexport default listModel","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Calendar from './ui/calendar/calendar';\nimport Header from './ui/header/header';\nimport ListContainer from './ui/list/list';\nimport listModel from './data/demo';\n\n\n\nclass CalendarMain extends React.Component {\n    constructor(props) {\n        super(props);\n        let today = new Date().getTime();\n        this.state = {\n            month: 12,\n            selectdate: today\n        };\n    }\n    preMonth() {\n        this.setState({\n            month: this.state.month - 1\n        });\n    }\n    nextMonth() {\n        this.setState({\n            month: this.state.month + 1\n        });\n    }\n    ondayclick(year, month, day) {\n\n        this.setState({\n            selectdate: new Date(year, parseInt(month) - 1, day).getTime()\n        })\n\n    }\n    render() {\n        // today = new Date(today.getFullYear(), today.getMonth(), 1);\n        let selectdate = this.state.selectdate;;\n        let month = this.state.month;\n        return (\n            <div className=\"calendar-wrapper-box\">\n                <div className=\"box-hd\">\n                    <span className=\"fl icon-back js_back \" onClick={this.preMonth.bind(this)}  ></span>\n                    <span className=\"fr icon-next js_next\" onClick={this.nextMonth.bind(this)} ></span>\n                </div>\n                <Calendar ondayclick={this.ondayclick.bind(this)} year=\"2018\" month={month} selectdate={selectdate} />\n            </div>\n        )\n    }\n}\n\nclass HeaderMain extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            title: '我是标题'\n        };\n\n        //这里定义，右边按钮规则\n        this.state.right = [\n            {\n                //希望代码执行时候的作用域\n                view: this,\n                tagname: 'search',\n                callback: function () {\n                    console.log(this)\n                    console.log('搜索')\n                }\n            },\n            {\n                view: this,\n                tagname: 'tips',\n                value: '说明',\n                callback: function () {\n                    alert('我是按钮')\n                }\n            }\n        ]\n\n    }\n    onBackaction() {\n        console.log('返回')\n    }\n    render() {\n        return (\n            <Header right={this.state.right} title={this.state.title} backaction={this.onBackaction.bind(this)} />\n        )\n    }\n}\n\n//业务列表项目，因为每个页面列表展示皆不一样，所以将这段代码外放\nclass ListItem extends React.Component {\n    render() {\n        let data = this.props.data;\n        return (\n            <li className=\"bus-list-item \">\n                <div className=\"bus-seat\">\n                    <span className=\" fl\">{data.train_number}</span><span className=\" fr\">{data.use_time + '分'} </span>\n                </div>\n                <div className=\"detail\">\n                    <div className=\"sub-list set-out\">\n                        <span className=\"bus-go-off\">{data.from_time}</span> <span className=\"start\"><span className=\"icon-circle s-icon1\">\n                        </span>{data.from_station}</span> <span className=\"fr price\">￥{data.seats[0].seat_price}起</span>\n                    </div>\n                    <div className=\"sub-list\">\n                        <span className=\"bus-arrival-time\">{data.to_time}</span> <span className=\"end\"><span className=\"icon-circle s-icon2\">\n                        </span>{data.to_station}</span> <span className=\"fr \">666张</span>\n                    </div>\n                </div>\n                <div className=\"bus-seats-info\">\n                    <span>硬座(555) </span>\n                    <span>硬卧(1653) </span>\n                    <span>软卧(56) </span>\n                    <span>无座(334) </span>\n                </div>\n            </li>\n        )\n    }\n}\n\nclass PageMain extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: []\n        };\n    }\n    componentDidMount() {\n        let scope = this;\n        listModel.setParam({\n            a: 1,\n            b: 'aa'\n        });\n        listModel.execute(function (data) {\n            scope.setState({\n                data: scope.state.data.concat(data)\n            });\n        })\n    }\n    render() {\n        let List = ListContainer(ListItem);\n\n\n        // today = new Date(today.getFullYear(), today.getMonth(), 1);\n        return (\n            <div className=\"page-list cm-page\">\n                <HeaderMain />\n                <div className=\"calendar-bar-wrapper js_calendar_wrapper\">\n                </div>\n                <List data={this.state.data} />\n            </div>\n        )\n    }\n}\n\nReactDOM.render(\n    <PageMain  />, document.getElementById('root')\n);\n"],"sourceRoot":""}